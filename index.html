<!DOCTYPE html>

<html >
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/chessboard-0.3.0.min.css" />
</head>
<body>
    <script type ="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type ="text/javascript" src="js/chessboard-0.3.0.js"></script>
    <script type ="text/javascript" src="js/chess.js"></script>
    <script type="text/javascript" src="js/webchessfunctions.js"></script>
    <p>Basic chess bot</p>
    <div id="board" style="width:400px"></div>
    <script>
        var chess = new Chess();
        var board;
        var onDragStart = function (source, piece, position, orientation) {
            if (chess.in_checkmate() === true || chess.in_draw() === true || piece.search(/^b/) !== -1) {
                return false;
            }
        };
        var makeMove = function () {
            var move = minimaxRoot(2, chess, true);
            chess.move(move);
            board.position(chess.fen());
        };
        var onDrop = function (source, target) {
            // see if the move is legal
            var move = chess.move({
                from: source,
                to: target,
                promotion: 'q'
            });
            if (move === null) {
                return 'snapback';
            }
            if (chess.game_over()) {
                alert('Game over');
            }
            window.setTimeout(makeMove,100);
        };
        var onSnapEnd = function () {
            board.position(chess.fen());
        };
        var config = {
            draggable: true,
            position: 'start',
            onDragStart: onDragStart,
            onDrop: onDrop,
            onSnapEnd: onSnapEnd,
        };
        board = ChessBoard('board', config);
 
    </script>
</body>
</html>